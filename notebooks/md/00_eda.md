# ConveyorGuard EDA 분석 결과

## 1. 데이터 규모

| 항목 | 값 |
|------|-----|
| 전체 세션 | 341개 (Train 303 + Val 38) |
| 전체 프레임 | 111,870개 |
| 센서 | 8채널 (NTC, PM1.0, PM2.5, PM10, CT1~CT4) |
| 열화상 | 120×160 → 60×80 (다운샘플링) |
| 외부환경 | 3채널 (온도, 습도, 조도) |

---

## 2. 핵심 발견 #1: 클래스 불균형

| 클래스 | 개수 | 비율 |
|--------|------|------|
| 정상(0) | 54,928 | 49.1% |
| 경미(1) | 24,081 | 21.5% |
| 중간(2) | 24,191 | 21.6% |
| 심각(3) | 8,670 | **7.8%** |

**불균형 비율: 6.34:1** → 클래스 가중치 필요

---

## 3. 핵심 발견 #2: 심각(3) 클래스 특성 ⭐

| 항목 | 값 | 의미 |
|------|-----|------|
| 심각 dominant 세션 | **0개** | 세션 전체가 심각인 경우 없음 |
| 심각 포함 세션 | **289개** (85%) | 대부분 세션에 심각 구간 존재 |

### 비유
> 1시간 영화에서 무서운 장면 5분
> - 영화 전체 = "로맨스" (dominant)
> - 5분 구간 = "공포" (심각)

### 시사점
```
❌ 세션 단위 분류 → 심각 탐지 불가
✅ 윈도우 단위 분류 → 심각 탐지 가능
```

---

## 4. 핵심 발견 #3: 센서 중요도

| 순위 | 센서 | 상관도 |
|------|------|--------|
| 1 | **NTC** | **0.792** |
| 2 | CT2 | 0.382 |
| 3 | CT1 | 0.336 |
| 4 | CT4 | 0.233 |
| 5~8 | PM, CT3 | 0.17~0.21 |

**NTC(온도)가 열화 판별에 가장 중요!**

---

## 5. 핵심 발견 #4: 열화상 이미지

| 상태 | max 온도 | std |
|------|----------|-----|
| 정상 | 49°C | 1.5 |
| 경미 | 67°C | 3.8 |
| 중간 | 84°C | 7.0 |
| 심각 | **96°C** | 8.2 |

**열화 상태 ↑ → 최고온도 ↑, 변동성 ↑**

---

## 6. 핵심 발견 #5: 외부환경 영향

| 환경 변수 | 상관도 |
|-----------|--------|
| Illuminance | 0.058 |
| Temperature | 0.056 |
| Humidity | 0.048 |

**모두 0.06 미만 → 거의 무관 → 보조 피처 또는 제외**

---

## 7. 모델 설계 시사점

| 항목 | 결정 | 근거 |
|------|------|------|
| 분류 단위 | 윈도우 (30프레임) | 심각이 구간에서만 발생 |
| Split 방식 | 세션 단위 | 데이터 누출 방지 |
| 클래스 가중치 | 필요 | 6.34:1 불균형 |
| 핵심 피처 | NTC | 상관도 0.79 |
| 외부환경 | FiLM 조건화 | 상관도 낮음 |

---

## 8. 파이프라인 연결

```
00_EDA (현재)
  ├── 클래스 분포 → 윈도우 필요성 발견
  ├── 센서 상관도 → NTC 핵심 피처
  ├── 정규화 범위 → 1-99 percentile
  └── eda_metadata.joblib 저장
        ↓
01_preprocess
  └── 윈도우 생성 + 세션 Split + 가중치
        ↓
02_baseline_cnn / 03_dl_fusion
  └── 학습 + 평가
```

---

## 핵심 요약

> **"심각(3)은 세션이 아니라 구간에서 발생한다"**

이 발견이 전체 설계 결정:
- ✅ 윈도우 단위 분류
- ✅ 세션 단위 Split  
- ✅ 클래스 가중치